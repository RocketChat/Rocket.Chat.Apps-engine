{"version":3,"sources":["src/server/accessors/RoomExtender.ts"],"names":[],"mappings":";;AACA,wDAAuE;AAIvE,iDAA8C;AAE9C;IAGI,YAAoB,IAAW;QAAX,SAAI,GAAJ,IAAI,CAAO;QAC3B,IAAI,CAAC,IAAI,GAAG,qCAA0B,CAAC,IAAI,CAAC;IAChD,CAAC;IAEM,cAAc,CAAC,GAAW,EAAE,KAAU;QACzC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;SAC/B;QAED,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE;YAC7B,MAAM,IAAI,KAAK,CAAC,wDAAyD,GAAI,EAAE,CAAC,CAAC;SACpF;QAED,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QAEpC,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,SAAS,CAAC,IAAW;QACxB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACrC,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAU,CAAC;SAC7C;QAED,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC7C,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;SACvD;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAExC,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,OAAO;QACV,OAAO,qBAAS,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1C,CAAC;CACJ;AAtCD,oCAsCC","file":"RoomExtender.js","sourcesContent":["import { IRoomExtender } from '../../definition/accessors';\nimport { RocketChatAssociationModel } from '../../definition/metadata';\nimport { IRoom } from '../../definition/rooms';\nimport { IUser } from '../../definition/users';\n\nimport { Utilities } from '../misc/Utilities';\n\nexport class RoomExtender implements IRoomExtender {\n    public kind: RocketChatAssociationModel.ROOM;\n\n    constructor(private room: IRoom) {\n        this.kind = RocketChatAssociationModel.ROOM;\n    }\n\n    public addCustomField(key: string, value: any): IRoomExtender {\n        if (!this.room.customFields) {\n            this.room.customFields = {};\n        }\n\n        if (this.room.customFields[key]) {\n            throw new Error(`The room already contains a custom field by the key: ${ key }`);\n        }\n\n        this.room.customFields[key] = value;\n\n        return this;\n    }\n\n    public addMember(user: IUser): IRoomExtender {\n        if (!Array.isArray(this.room.usernames)) {\n            this.room.usernames = new Array<string>();\n        }\n\n        if (this.room.usernames.includes(user.username)) {\n            throw new Error('The user is already in the room.');\n        }\n\n        this.room.usernames.push(user.username);\n\n        return this;\n    }\n\n    public getRoom(): IRoom {\n        return Utilities.deepClone(this.room);\n    }\n}\n"]}